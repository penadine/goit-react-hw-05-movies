{"version":3,"file":"static/js/530.34190674.chunk.js","mappings":"0NACA,GAAgB,UAAY,0BAA0B,UAAY,2B,SC8ElE,EA1Ee,WAAO,IAAD,EAInB,GAAwCA,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KACMC,EAAY,UAAGF,EAAaG,IAAI,gBAApB,QAAgC,GAElD,GAA4BC,EAAAA,EAAAA,UAAS,IAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAAoCF,EAAAA,EAAAA,UAASF,GAA7C,eAAOK,EAAP,KAAmBC,EAAnB,MAGAC,EAAAA,EAAAA,YAAU,WACJP,GACFM,EAAcN,EAEjB,GAAE,CAACA,KAGJO,EAAAA,EAAAA,YAAU,WACJF,GACFG,EAAAA,EAAAA,IAAA,UAlBa,+BAkBb,+BACyCH,EADzC,oBAnBY,qCAqBTI,MAAK,SAAAC,GACJN,EAAUM,EAASC,KAAKC,QACzB,IACAC,OAAM,SAAAC,GACLC,QAAQD,MAAM,uJAAgCA,EAC/C,GAEN,GAAE,CAACT,IAEJ,IAYMW,EAAmB,WACvBC,eAAeC,QAAQ,YAAab,EACrC,EAED,OACE,iBAAKc,UAAWC,EAAAA,UAAhB,WACE,kBAAMD,UAAWC,EAAAA,UAAkBC,SAdlB,SAAAC,GACnBA,EAAIC,iBACJ,IAAMC,EAAa,IAAIC,gBACN,KAAfpB,EAAoB,CAAEqB,MAAOrB,GAAe,CAAC,GAE/CN,EAAgByB,EACjB,EAQG,WACE,kBACEG,KAAK,OACLC,MAAOvB,EACPwB,SAtBkB,SAAAP,GACxBhB,EAAcgB,EAAIQ,OAAOF,MAC1B,EAqBOG,YAAY,2BAEd,mBAAQJ,KAAK,SAAb,wBAEF,eAAIR,UAAWC,EAAAA,WAAf,SACGjB,EAAO6B,KAAI,SAAAC,GAAK,OACf,eAAmBd,UAAWC,EAAAA,UAA9B,UACE,SAAC,KAAD,CACEc,GAAI,CAAEC,SAAS,WAAD,OAAaF,EAAMG,KACjCC,QAASrB,EAFX,SAIGiB,EAAMK,SALFL,EAAMG,GADA,QAaxB,C","sources":["webpack://react-homework-template/./src/pages/Movies.module.css?d157","pages/Movies.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Movies_container__hb-lD\",\"searchBar\":\"Movies_searchBar__iJJq5\"};","import React, { useState, useEffect } from 'react';\nimport { Link, useSearchParams } from 'react-router-dom';\nimport axios from 'axios';\nimport styles from './Movies.module.css';\n\nconst Movies = () => {\n  const API_KEY = '4eb4e6539dc3b8035d2876c8ff1613bb';\n  const BASE_URL = 'https://api.themoviedb.org/3';\n\n  const [searchParams, setSearchParams] = useSearchParams();\n  const currentQuery = searchParams.get('query') ?? '';\n\n  const [movies, setMovies] = useState([]);\n  const [inputQuery, setInputQuery] = useState(currentQuery);\n\n  // Перший useEffect: коли змінюється параметр URL, змінюємо inputQuery\n  useEffect(() => {\n    if (currentQuery) {\n      setInputQuery(currentQuery);\n    }\n  }, [currentQuery]);\n\n  // Другий useEffect: коли змінюється inputQuery, виконуємо запит\n  useEffect(() => {\n    if (inputQuery) {\n      axios\n        .get(`${BASE_URL}/search/movie?query=${inputQuery}&api_key=${API_KEY}`)\n        .then(response => {\n          setMovies(response.data.results);\n        })\n        .catch(error => {\n          console.error('Ошибка при получении данных:', error);\n        });\n    }\n  }, [inputQuery]);\n\n  const updateQueryString = evt => {\n    setInputQuery(evt.target.value);\n  };\n\n  const handleSearch = evt => {\n    evt.preventDefault();\n    const nextParams = new URLSearchParams(\n      inputQuery !== '' ? { query: inputQuery } : {}\n    );\n    setSearchParams(nextParams);\n  };\n\n  const handleMovieClick = () => {\n    sessionStorage.setItem('lastQuery', inputQuery);\n  };\n\n  return (\n    <div className={styles.container}>\n      <form className={styles.searchBar} onSubmit={handleSearch}>\n        <input\n          type=\"text\"\n          value={inputQuery}\n          onChange={updateQueryString}\n          placeholder=\"Search for a movie...\"\n        />\n        <button type=\"submit\">Search</button>\n      </form>\n      <ul className={styles.moviesList}>\n        {movies.map(movie => (\n          <li key={movie.id} className={styles.movieItem}>\n            <Link\n              to={{ pathname: `/movies/${movie.id}` }}\n              onClick={handleMovieClick}\n            >\n              {movie.title}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Movies;\n"],"names":["useSearchParams","searchParams","setSearchParams","currentQuery","get","useState","movies","setMovies","inputQuery","setInputQuery","useEffect","axios","then","response","data","results","catch","error","console","handleMovieClick","sessionStorage","setItem","className","styles","onSubmit","evt","preventDefault","nextParams","URLSearchParams","query","type","value","onChange","target","placeholder","map","movie","to","pathname","id","onClick","title"],"sourceRoot":""}